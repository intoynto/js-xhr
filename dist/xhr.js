(()=>{"use strict";var e={871:function(e,t,r){var s=this&&this.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};t.__esModule=!0,t.ajax=void 0;var n=r(608),o=r(692),a=r(694);t.ajax=function(e){var t=function(e){(0,n.getObserve)().listen(e)};return new Promise((function(r,n){(function(e){var t=s(e,[]);return new Promise((function(e,r){var s,n=(t.method?t.method:t.type?t.type:"GET").toString().toUpperCase().trim(),i=t.responseType||"json",l=t.params&&"object"==typeof t.params?t.params:t.data&&"object"==typeof t.data?t.data:null,c=null!=l,p="json"===(i||"").toLowerCase().trim(),f=(t.url||"").toString().trim();if(t.formElement){s=new FormData(t.formElement);var u=t.formElement.querySelectorAll("input[type=file]"),d=[];if(u.length>0)for(var v=0;v<u.length;v++){var h=u[v];h.files&&h.files.length>0&&h.files[0]||d.push(h.name)}for(v=0;v<d.length;v++)s.delete(d[v])}else t.formData&&(s=t.formData);if(c)if(s)(0,o.createFormData)(l,s);else if("GET"===n){var m=(0,a.serialize)(l);m.length>0&&(f.indexOf("?")<0&&(f+="?"),f+=m)}else s=(0,o.createFormData)(l);var g=new XMLHttpRequest;if(g.open(n,f),t.headers)for(var y in t.headers)g.setRequestHeader(y,t.headers[y]);p&&g.setRequestHeader("accept","application/json"),e({xhr:g,formData:s,handleToJson:p})}))})(e).then((function(s){var o=s.handleToJson,a=s.xhr,i=s.formData;if(a.addEventListener("loadend",(function(e){var s,i=e.target,l={title:"Throw",status:a.status,code:a.status,statusText:a.statusText,message:a.statusText,description:"",xhr:a},c=200===i.status;if("json"!==i.responseType.toString().toLowerCase()){var p=i.getResponseHeader("content-type");(p=p?p.toString().toLowerCase().trim():"").split(";"),s=p.indexOf("application/json")>0}if(c)if(o||s){if((a.responseText||"").toString().trim().length<1)return l.message="Tidak ada result dari server.",t(i),void n(l);try{var f=JSON.parse(a.responseText);t(i),r(f)}catch(e){l.code=409,l.message="Parse error. "+(e.message?e.message:"Unknown error."),t(i),n(l)}}else t(i),r(a.response);else{l.title="Throw "+a.status;try{var u=JSON.parse(a.responseText);if("object"==typeof u){var d=Array.isArray(u.exception)?u.exception[0]:null;d?(l.message=d.message,l.description=d.description?d.description:d.message):(l.message=u.error&&u.error.message?u.error.message:u.message?u.message:l.message,l.description=u.error&&u.error.description?u.error.description:u.description?u.description:l.description)}t(u),n(l)}catch(e){t(i),n(l)}}})),a.addEventListener("error",(function(e){var r=e.target;t(r),n({title:"Throw",message:"Unknown error.",xhr:r})})),"function"==typeof e.uploadProgress){var l=e.uploadProgress;a.upload.addEventListener("progress",(function(e){var t=e.loaded,r=e.total;l({loaded:t,total:r,percentage:t/r*100})}))}a.send(i)})).catch((function(e){n({title:"Throw",message:e&&e.message?e.message:"Unknown error."})}))}))}},692:(e,t)=>{t.__esModule=!0,t.createFormData=void 0,t.createFormData=function e(t,r,s){var n=r||new FormData;for(var o in t){var a=s?"".concat(s,"[").concat(o,"]"):o;if(t[o]instanceof Date)n.append(a,t[o].toString());else if(Array.isArray(t[o])&&t[o].length>0)for(var i=t[o],l=0;l<i.length;l++)"object"==typeof i[l]?e(i[l],n,"".concat(a,"[").concat(l,"]")):n.append("".concat(a,"[]"),i[l]);else if("object"!=typeof t[o]||t[o]instanceof File){var c=t[o];null!=c&&n.append(a,c)}else e(t[o],n,a)}return n}},608:(e,t,r)=>{t.__esModule=!0,t.getObserve=t.ajax=void 0;var s=r(871);t.ajax=s.ajax;var n=r(627);t.getObserve=n.getObserve},627:(e,t)=>{t.__esModule=!0,t.getObserve=void 0;var r=function(){function e(){this.listenerKeys=[],this.listenters={},this.subscribe=this.subscribe.bind(this),this.unSubscribe=this.unSubscribe.bind(this),this.listen=this.listen.bind(this)}return e.prototype.subscribe=function(e){var t=Math.random().toString(36);return this.listenters[t]=e,t},e.prototype.unSubscribe=function(e){var t=this.listenerKeys.indexOf(e);t>=0&&(this.listenerKeys.splice(t),delete this.listenters[e])},e.prototype.listen=function(e){for(var t in this.listenters){var r=this.listenters[t];if("function"==typeof r)try{r(e)}catch(e){}}},e}(),s=null;t.getObserve=function(){return s||(s=new r),s}},694:(e,t)=>{t.__esModule=!0,t.serialize=void 0,t.serialize=function e(t,r,s){if(s=s||[],"object"==typeof t)for(var n in t){var o=t[n];null!=o&&e(o,r?r+"["+n+"]":n,s)}else s.push(r+="="+encodeURIComponent(t));return s.join("&")}}},t={};(function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports})(608)})();
//# sourceMappingURL=xhr.js.map